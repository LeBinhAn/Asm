if (self.CavalryLogger) { CavalryLogger.start_js(["wlhR6"]); }

__d("ProfileCometActionFriendRequestHandler_handler$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"short_name",args:null,storageKey:null};return{kind:"SplitOperation",metadata:{derivedFrom:"ProfileCometActionFriendRequestHandler_handler"},name:"ProfileCometActionFriendRequestHandler_handler$normalization",selections:[{kind:"LinkedField",alias:null,name:"profile_action",storageKey:null,args:null,concreteType:null,plural:!1,selections:[a,{kind:"LinkedField",alias:null,name:"profile_owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[b,{kind:"ScalarField",alias:null,name:"friendship_status",args:null,storageKey:null}]},{kind:"InlineFragment",type:"ProfileActionFriendRequest",selections:[{kind:"LinkedField",alias:null,name:"restrictable_profile_owner",storageKey:null,args:null,concreteType:null,plural:!1,selections:[a,{kind:"InlineFragment",type:"RestrictedUser",selections:[b,c,d]},{kind:"InlineFragment",type:"User",selections:[b,{kind:"ScalarField",alias:null,name:"gender",args:null,storageKey:null},c,d]},b]},{kind:"LinkedField",alias:null,name:"profile_owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[b]}]},b]}]}}();e.exports=a}),null);
__d("ProfileCometActionFriendRequestHandler_handler.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"ProfileCometActionFriendRequestHandler_handler",type:"ProfileActionFriendRequestHandler",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"profile_action",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"LinkedField",alias:null,name:"profile_owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"friendship_status",args:null,storageKey:null}]},{kind:"FragmentSpread",name:"ProfileCometActiveFriendMenu_action",args:null},{kind:"FragmentSpread",name:"ProfileCometIncomingFriendRequestMenu_action",args:null},{kind:"FragmentSpread",name:"ProfileCometOutgoingFriendRequestMenu_action",args:null}]}]};e.exports=a}),null);
__d("ProfileCometActionFriendRequestHandler.react",["CometLazyPopoverTrigger.react","CometRelay","FriendingCometErrorHandler.react","FriendingCometFriendRequestSendMutation","JSResource","React","promiseDone","recoverableViolation","ProfileCometActionFriendRequestHandler_handler.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;var h=b("CometRelay").useFragment,i=b("CometRelay").useRelayEnvironment,j=b("FriendingCometErrorHandler.react").useFriendingErrorHandler,k=b("React");c=b("React");var l=c.useCallback,m=b("JSResource")("ProfileCometActiveFriendMenu.react").__setRef("ProfileCometActionFriendRequestHandler.react"),n=b("JSResource")("ProfileCometIncomingFriendRequestMenu.react").__setRef("ProfileCometActionFriendRequestHandler.react"),o=b("JSResource")("FriendingCometFriendRequestCancelMutation").__setRef("ProfileCometActionFriendRequestHandler.react");function a(a){var c,d,e=a.children,f=a.handler;a=a.popoverPosition;var p=i();f=h(g!==void 0?g:g=b("ProfileCometActionFriendRequestHandler_handler.graphql"),f);f=f.profile_action;var q=(f==null?void 0:(c=f.profile_owner)==null?void 0:c.id)||"0";q==="0"&&b("recoverableViolation")("Missing profile ID","profile_comet");var r=j({addFriendId:q,addFriendSource:"profile_button"});c=l(function(){b("FriendingCometFriendRequestSendMutation").commit(p,q,"profile_button",r)},[p,r,q]);var s=l(function(){b("promiseDone")(o.load().then(function(a){a=a.commit;a(p,q,"profile",r)}))},[p,r,q]);d=f==null?void 0:(d=f.profile_owner)==null?void 0:d.friendship_status;if(d==null){b("recoverableViolation")("Failed to fetch friendship status for profile "+q,"profile_comet");return null}var t=null;switch(d){case"ARE_FRIENDS":t=m;break;case"CAN_REQUEST":return e({onPress:c});case"INCOMING_REQUEST":t=n;break;case"OUTGOING_REQUEST":return e({onPress:s});default:b("recoverableViolation")("Unknown friendship status "+d+" for profile "+q,"profile_comet");return null}return!t||!f?e({}):k.jsx(b("CometLazyPopoverTrigger.react"),{autoAlign:!0,popoverProps:{action:f},popoverResource:t,position:a,preloadTrigger:"button",children:function(a,b,c,d,f,g){return e({onHoverIn:d,onHoverOut:f,onPress:b,onPressIn:g,ref:a})}})}e.exports=a}),null);